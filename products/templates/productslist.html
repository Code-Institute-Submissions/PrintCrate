{% extends "base.html" %}
{% block content %}
<div class="container-fluid main-container">
  <div class="row">
    <!-- Search form to filter for queried term. -->
    <form class="form container mt-2 mx-1" action="{% url 'product_search' %}" method="GET">
      <div class="row">
        <input class="form-control col-7 mr-1" type="text" name="search_query">
        <button class="btn btn-custom col-4 text-center" type="search">Search</button>
      </div>
    </form>
  </div>
  {% if search_query %}
  <div class="row">
    <p class="col-12 mt-1">Search results for: "{{ search_query }}"</p>
  </div>
  {% endif %}
  {% if products %}
  <div class="row d-flex flex-wrap">
    {% for product in page_object %}
    <div class="col-12 col-md-6 col-lg-4 my-3">
      {% include "productcard.html" %}
    </div>
    {% endfor %}
  </div>
  <!-- https://docs.djangoproject.com/en/3.0/topics/pagination/ -->
  <div class="row justify-content-center align-items-center">
    {% if page_object.has_previous %}
    <a href="?page=1" class="text-decoration-none"><button class="btn pagination-btn"><i
          class="fas fa-angle-double-left"></i></button></a>
    <a href="?page={{ page_object.previous_page_number }}"><button class="btn pagination-btn"><i
          class="fas fa-angle-left"></i></button></a>
    {% endif %}
    <div class="mx-3">
      Page {{ page_object.number }} of {{ page_object.paginator.num_pages }}
    </div>
    {% if page_object.has_next %}
    <a href="?page={{ page_object.next_page_number }}"><button class="btn pagination-btn"><i
          class="fas fa-angle-right"></i></button></a>
    <a href="?page={{ page_object.paginator.num_pages }}"><button class="btn pagination-btn"><i
          class="fas fa-angle-double-right"></i></button></a>
    {% endif %}
  </div>

  {% else %}
  <h1 class="d-flex text-center mt-3">There are currently no items in
    stock.</h1>
  {% endif %}
</div>
</div>
{% endblock %}